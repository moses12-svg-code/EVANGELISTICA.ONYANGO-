<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>REVEREND GEORGE OMONDI EVANGELISM MINISTRY</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    :root {
      --primary-color: #4a6bff;
      --secondary-color: #6c5ce7;
      --accent-color: #ff4757;
      --success-color: #2ed573;
      --warning-color: #ffa502;
      --text-color: #333;
      --light-gray: #f5f6fa;
      --dark-gray: #a4b0be;
      --white: #ffffff;
      --dark-bg: #121212;
      --card-bg: #ffffff;
      --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      --kids-color: #ff9ff3;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      margin: 0;
      padding: 0;
      background-color: #f5f5f5;
      min-height: 100vh;
      color: var(--text-color);
      transition: background 0.3s ease;
      background-image: url(RI.jpeg);
      animation: animate 20s infinite alternate;
    }
    @keyframes animate{
      0%{
        background-image: url(RI.jpeg);
      }
      10%{
        background-image: url(MA.jpeg);
      }
      20%{
        background-image: url(MC.jpeg);
      }
      30%{
        background-image: url(MF.jpeg);
      }
      40%{
        background-image: url(MH.jpeg);
      }
      50%{
        background-image: url(MK.jpeg);
      }
      60%{
        background-image: url(ML.jpeg);
      }
      70%{
        background-image: url(MM.jpeg);
      }
      80%{
        background-image: url(MB.jpeg);
      }
      90%{
        background-image: url(MJ.jpeg);
      }
      100%{
        background-image: url(MI.jpeg);
      }
    }
    form{
      background-image: url(RI.jpeg);
      animation: border-glow 4s infinite alternate;
    }
    @keyframes border-glow{
      0%{
        border: 2px solid blueviolet;
        box-shadow: 0 0 10px blueviolet, 0 0 20px blueviolet, 0 0 30px blueviolet, 0 0 40px blueviolet;
      }
      50%{
        border: 2px solid green;
        box-shadow: 0 0 10px green, 0 0 20px green, 0 0 30px green, 0 0 40px green;
      }
      100%{
        border: 2px solid red;
        box-shadow: 0 0 10px red, 0 0 20px red, 0 0 30px red, 0 0 40px red;
      }
    }
    input[type="text"]{
      background-color: aquamarine;
      color: blueviolet;
      border: none;
      border-radius: 5px;
      padding: 12px 20px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    label{
      font-weight: bold;
      color: blueviolet;
    }

    input[type="text"]:hover {
      background-color: aqua;
      color: black;
    }
    input[type="email"]{
      background-color: aquamarine;
      color: black;
      border: none;
      border-radius: 5px;
      padding: 12px 20px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    input[type="email"]:hover {
      background-color: aqua;
      color: white;
    }
    input[type="password"]{
      background-color: aquamarine;
      font-weight: bold;
      color: blueviolet;
      border: none;
      border-radius: 5px;
      padding: 12px 20px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    input[type="password"]:hover {
      background-color: aqua;
    }

    body.dark-mode {
      background-color: var(--dark-bg);
      color: var(--white);
    }
    
    body.dark-mode .card,
    body.dark-mode .auth-container,
    body.dark-mode .modal-content {
      background-color: #2d2d2d;
      color: var(--white);
    }
    
    body.dark-mode .form-control,
    body.dark-mode .form-group input {
      background-color: #3d3d3d;
      color: var(--white);
      border-color: #555;
    }
    
    body.dark-mode .sidebar-menu a,
    body.dark-mode .section-title,
    body.dark-mode .card-title,
    body.dark-mode .note-title,
    body.dark-mode .note-content {
      color: var(--white);
    }
    
    body.password-hashing-page {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: linear-gradient(to right, #4a6bff, #6c5ce7);
      color: var(--white);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body.auth-page {
      background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://images.unsplash.com/photo-1503764654157-72d979d9af2f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    /* Header Styles */
    .header {
      background-color: rgba(0, 0, 0, 0.7);
      background-image: url('https://images.unsplash.com/photo-1503764654157-72d979d9af2f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
      background-blend-mode: overlay;
      color: white;
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 10;
    }
    
    .logo {
      font-size: 24px;
      font-weight: bold;
      display: flex;
      align-items: center;
    }
    
    .logo i {
      margin-right: 10px;
    }
    
    .user-controls {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .logout-btn {
      padding: 8px 15px;
      background: aquamarine;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .logout-btn:hover {
      background: #e84141;
      transform: translateY(-2px);
    }
    
    /* Main Container */
    .main-container {
      display: flex;
      min-height: calc(100vh - 64px);
    }
    
    /* Login/Signup Container */
    .auth-container {
      width: 100%;
      max-width: 450px;
      padding: 2.5rem 3rem;
      border-radius: 12px;
      box-shadow: var(--shadow);
      background-color: var(--white);
      margin: 2rem;
      transition: all 0.3s ease;
    }
    
    .auth-container h2 {
      text-align: center;
      margin-bottom: 1.5rem;
      color: var(--primary-color);
    }
    
    /* Form Styles */
    .form-group {
      margin-bottom: 1rem;
      position: relative;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: var(--text-color);
    }
    
    body.dark-mode .form-group label {
      color: var(--white);
    }
    
    .form-group input {
      width: 100%;
      padding: 0.8rem 1rem;
      border: 1px solid var(--dark-gray);
      border-radius: 6px;
      font-size: 1rem;
      transition: border 0.3s ease;
    }
    
    .form-group input:focus {
      border-color: var(--primary-color);
      outline: none;
      box-shadow: 0 0 0 2px rgba(74, 107, 255, 0.2);
    }
    
    .form-group input[type="file"] {
      padding: 0.5rem;
    }
    
    .photo-preview {
      display: block;
      margin: 1rem auto;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid var(--primary-color);
      box-shadow: var(--shadow);
    }
    
    /* Button Styles */
    .btn {
      width: 100%;
      padding: 0.8rem;
      background: var(--primary-color);
      color: var(--white);
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .btn:hover {
      background: #3a56e0;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    
    .btn-secondary {
      background: var(--secondary-color);
    }
    
    .btn-secondary:hover {
      background: #5d4bc9;
    }
    
    .btn-accent {
      background: var(--accent-color);
    }
    
    .btn-accent:hover {
      background: #e84141;
    }
    
    .btn-success {
      background: var(--success-color);
    }
    
    .btn-success:hover {
      background: #25b562;
    }
    
    .btn-kids {
      background: var(--kids-color);
      color: #000;
    }
    
    .btn-kids:hover {
      background: #f368e0;
    }
    
    /* Options Links */
    .options {
      text-align: center;
      margin-top: 1.5rem;
      font-size: 0.95rem;
    }
    
    .options a {
      color: var(--primary-color);
      text-decoration: none;
      margin: 0 0.5rem;
      font-weight: 500;
      transition: color 0.3s ease;
    }
    
    .options a:hover {
      color: var(--secondary-color);
      text-decoration: underline;
    }
    
    /* Divider */
    .divider {
      text-align: center;
      margin: 1.5rem 0;
      position: relative;
      color: var(--dark-gray);
    }
    
    .divider::before,
    .divider::after {
      content: '';
      height: 1px;
      width: 45%;
      background: var(--dark-gray);
      position: absolute;
      top: 50%;
    }
    
    .divider::before {
      left: 0;
    }
    
    .divider::after {
      right: 0;
    }
    
    /* Social Buttons */
    .social-buttons {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }
    
    .social-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 0.7rem;
      border: 1px solid var(--dark-gray);
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 500;
      background: var(--white);
      transition: all 0.3s ease;
    }
    
    .social-btn:hover {
      background: var(--primary-color);
      color: white;
      transform: translateY(-2px);
    }
    
    .social-btn img {
      width: 20px;
      height: 20px;
    }
    
    /* Sidebar Navigation */
    .sidebar {
      width: 250px;
      background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8));
      color: white;
      padding: 20px 0;
      transition: all 0.3s ease;
      position: relative;
      z-index: 5;
    }
    
    .sidebar-menu {
      list-style: none;
    }
    
    .sidebar-menu li {
      margin-bottom: 5px;
    }
    
    .sidebar-menu a {
      display: flex;
      align-items: center;
      padding: 12px 20px;
      color: white;
      text-decoration: none;
      transition: all 0.3s ease;
    }
    
    .sidebar-menu a:hover, .sidebar-menu a.active {
      background: rgba(255, 255, 255, 0.1);
    }
    
    .sidebar-menu i {
      margin-right: 10px;
      width: 20px;
      text-align: center;
    }
    
    /* Content Area */
    .content {
      flex: 1;
      padding: 30px;
      background-image: url(MA.jpeg);
      position: relative;
    }
    .modal-body {
      max-height: 60vh;
      overflow-y: auto;
      padding: 20px;
    }

    .modal-body ul li {
      padding: 8px 0;
      border-bottom: 1px solid var(--light-gray);
    }

    .modal-body ul li:last-child {
      border-bottom: none;
    }
    body.dark-mode .content {
      background-color: #1e1e1e;
    }
    
    .section-title {
      color: var(--primary-color);
      margin-bottom: 20px;
      font-size: 24px;
      display: flex;
      align-items: center;
    }
    
    .section-title i {
      margin-right: 10px;
    }
    
    /* Dashboard Cards */
    .dashboard-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .card {
      background-color: var(--card-bg);
      border-radius: 10px;
      padding: 20px;
      box-shadow: var(--shadow);
      transition: transform 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .card-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-color);
    }
    
    body.dark-mode .card-title {
      color: var(--white);
    }
    
    .card-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
    }
    
    .card-content {
      color: var(--text-color);
    }
    
    body.dark-mode .card-content {
      color: var(--white);
    }
    
    /* Ministry Dashboard */
    .ministry-dashboard {
      display: none;
    }
    
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .dashboard-card {
      background: var(--card-bg);
      border-radius: 8px;
      padding: 1.5rem;
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
      cursor: pointer;
      text-align: center;
    }
    
    .dashboard-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
    }
    
    .card-icon {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: var(--primary-color);
    }
    
    /* Events Section */
    .events-list {
      margin-top: 1.5rem;
    }
    
    .event-item {
      padding: 1rem;
      border-bottom: 1px solid var(--light-gray);
      display: flex;
      align-items: center;
      gap: 1rem;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 10px;
    }
    
    body.dark-mode .event-item {
      border-bottom-color: #444;
    }
    
    .event-item:last-child {
      border-bottom: none;
    }
    
    .event-date {
      background: var(--primary-color);
      color: var(--white);
      width: 50px;
      height: 50px;
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      flex-shrink: 0;
    }
    
    .event-date .day {
      font-size: 1.2rem;
    }
    
    .event-date .month {
      font-size: 0.8rem;
      text-transform: uppercase;
    }
    
    .event-details h4 {
      margin-bottom: 0.3rem;
      color: var(--text-color);
    }
    
    body.dark-mode .event-details h4 {
      color: var(--white);
    }
    
    .event-details p {
      color: var(--dark-gray);
      font-size: 0.9rem;
    }
    
    /* Notes Section */
    .notes-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .note-card {
      background-color: var(--card-bg);
      border-radius: 8px;
      padding: 15px;
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .note-card:hover {
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .note-title {
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--text-color);
    }
    
    .note-content {
      color: var(--text-color);
      font-size: 14px;
      margin-bottom: 15px;
      white-space: pre-wrap;
    }
    
    .note-date {
      font-size: 12px;
      color: var(--dark-gray);
      text-align: right;
    }
    
    .note-actions {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    
    .note-actions .btn {
      padding: 8px 12px;
      font-size: 0.9rem;
    }
    
    .add-note-btn {
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 12px 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      transition: all 0.3s ease;
    }
    
    .add-note-btn:hover {
      background: #3a56e0;
      transform: translateY(-2px);
    }
    
    .add-note-btn i {
      margin-right: 8px;
    }
    
    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }
    
    .modal-content {
      background-color: var(--card-bg);
      border-radius: 10px;
      width: 90%;
      max-width: 600px;
      padding: 20px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .modal-title {
      font-size: 20px;
      font-weight: 600;
      color: var(--text-color);
    }
    
    body.dark-mode .modal-title {
      color: var(--white);
    }
    
    .close-modal {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--dark-gray);
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--text-color);
    }
    
    body.dark-mode .form-group label {
      color: var(--white);
    }
    
    .form-control {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 16px;
    }
    
    body.dark-mode .form-control {
      background-color: #3d3d3d;
      color: var(--white);
      border-color: #555;
    }
    
    .form-control:focus {
      border-color: var(--primary-color);
      outline: none;
    }
    
    textarea.form-control {
      min-height: 150px;
      resize: vertical;
    }
    
    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 20px;
    }
    
    .btn {
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    
    .btn-primary {
      background: var(--primary-color);
      color: white;
      border: none;
    }
    
    .btn-primary:hover {
      background: #3a56e0;
    }
    
    .btn-secondary {
      background: var(--secondary-color);
      color: white;
      border: none;
    }
    
    .btn-secondary:hover {
      background: #5d4bc9;
    }
    
    /* Teaching Section */
    .teaching-tools {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .tool-card {
      background-color: var(--card-bg);
      border-radius: 8px;
      padding: 20px;
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
      cursor: pointer;
      text-align: center;
    }
    
    .tool-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .tool-icon {
      font-size: 40px;
      margin-bottom: 15px;
      color: var(--primary-color);
    }
    
    .tool-title {
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--text-color);
    }
    
    body.dark-mode .tool-title {
      color: var(--white);
    }
    
    .tool-desc {
      color: var(--dark-gray);
      font-size: 14px;
    }

    /* Tool options */
    .tool-options {
      margin-top: 15px;
      display: none;
      flex-direction: column;
      gap: 8px;
    }
    
    /* Whiteboard Styles */
    .whiteboard-container {
      background-color: var(--card-bg);
      border-radius: 10px;
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 30px;
    }
    
    .whiteboard-tools {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    
    .whiteboard-tool {
      width: 40px;
      height: 40px;
      border-radius: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      background: #f1f3f4;
      transition: all 0.3s ease;
    }
    
    body.dark-mode .whiteboard-tool {
      background: #3d3d3d;
      color: white;
    }
    
    .whiteboard-tool.active {
      background: var(--primary-color);
      color: white;
    }
    
    .whiteboard-canvas {
      width: 100%;
      height: 500px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: white;
    }
    
    body.dark-mode .whiteboard-canvas {
      border-color: #555;
    }
    
    /* Calendar Styles */
    .calendar-container {
      background-color: var(--card-bg);
      border-radius: 10px;
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 30px;
    }
    
    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .calendar-nav {
      display: flex;
      gap: 10px;
    }
    
    .calendar-nav-btn {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      background: #f1f3f4;
      transition: all 0.3s ease;
    }
    
    body.dark-mode .calendar-nav-btn {
      background: #3d3d3d;
      color: white;
    }
    
    .calendar-nav-btn:hover {
      background: aqua;
    }
    
    body.dark-mode .calendar-nav-btn:hover {
      background: #4d4d4d;
    }
    
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
    }
    
    .calendar-day-header {
      text-align: center;
      font-weight: 600;
      padding: 10px;
      color: var(--text-color);
    }
    
    body.dark-mode .calendar-day-header {
      color: var(--white);
    }
    
    .calendar-day {
      aspect-ratio: 1;
      border-radius: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      background: var(--card-bg);
      transition: all 0.3s ease;
    }
    
    .calendar-day:hover {
      background: #e9ecef;
    }
    
    body.dark-mode .calendar-day:hover {
      background: #3d3d3d;
    }
    
    .calendar-day.today {
      background: var(--primary-color);
      color: var(--white);
    }
    
    .calendar-day.other-month {
      color: var(--dark-gray);
      opacity: 0.7;
    }
    
    /* File Manager Styles */
    .file-manager-container {
      background-color: var(--card-bg);
      border-radius: 10px;
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 30px;
    }
    
    .file-actions {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    
    .file-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 15px;
    }
    
    .file-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      background-color: var(--card-bg);
    }
    
    .file-item:hover {
      background: #f1f3f4;
    }
    
    body.dark-mode .file-item:hover {
      background: #3d3d3d;
    }
    
    .file-icon {
      font-size: 40px;
      margin-bottom: 10px;
      color: var(--primary-color);
    }
    
    .file-name {
      text-align: center;
      font-size: 14px;
      word-break: break-all;
      color: var(--text-color);
    }
    
    body.dark-mode .file-name {
      color: var(--white);
    }

    /* Sermon specific styles */
    .sermon-search {
      display: flex;
      align-items: center;
      margin-left: auto;
      flex-grow: 1;
      max-width: 300px;
    }

    .sermon-search input {
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #ddd;
      flex-grow: 1;
    }
    
    body.dark-mode .sermon-search input {
      background-color: #3d3d3d;
      color: white;
      border-color: #555;
    }

    .file-meta {
      font-size: 0.8rem;
      color: var(--dark-gray);
      margin: 5px 0;
      text-align: center;
    }
    
    /* Donation Section */
    .donation-methods {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .donation-card {
      background-color: var(--card-bg);
      border-radius: 8px;
      padding: 20px;
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
      cursor: pointer;
      text-align: center;
    }
    
    .donation-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .donation-icon {
      font-size: 40px;
      margin-bottom: 15px;
      color: var(--success-color);
    }
    
    .donation-title {
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--text-color);
    }
    
    body.dark-mode .donation-title {
      color: var(--white);
    }
    
    .donation-desc {
      color: var(--dark-gray);
      font-size: 14px;
      margin-bottom: 15px;
    }
    
    /* Recording Styles */
    .recording-container {
      background-color: var(--card-bg);
      border-radius: 10px;
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 30px;
      text-align: center;
    }
    
    .recording-controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }
    
    .recording-preview {
      width: 100%;
      max-width: 500px;
      margin: 20px auto;
      display: none;
    }
    
    #audioVisualizer {
      width: 100%;
      height: 100px;
      background-color: #f1f3f4;
      border-radius: 5px;
      margin: 20px 0;
    }
    
    body.dark-mode #audioVisualizer {
      background-color: #3d3d3d;
    }
    
    /* Children's Bible Study Section */
    .kids-section {
      background-color: var(--card-bg);
      border-radius: 10px;
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 30px;
    }
    
    .kids-videos {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .video-card {
      background-color: var(--card-bg);
      border-radius: 8px;
      overflow: hidden;
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
    }
    
    .video-card:hover {
      transform: translateY(-5px);
    }
    
    .video-container {
      position: relative;
      padding-bottom: 56.25%; /* 16:9 aspect ratio */
      height: 0;
      overflow: hidden;
    }
    
    .video-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
    }
    
    .video-info {
      padding: 15px;
    }
    
    .video-title {
      font-weight: 600;
      margin-bottom: 5px;
      color: var(--text-color);
    }
    
    body.dark-mode .video-title {
      color: var(--white);
    }
    
    .video-desc {
      color: var(--dark-gray);
      font-size: 14px;
      margin-bottom: 10px;
    }
    
    .online-study-options {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }
    
    .study-option {
      background-color: var(--card-bg);
      border-radius: 8px;
      padding: 20px;
      box-shadow: var(--shadow);
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .study-option:hover {
      transform: translateY(-5px);
    }
    
    .study-icon {
      font-size: 40px;
      margin-bottom: 15px;
      color: var(--kids-color);
    }
    
    .study-title {
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--text-color);
    }
    
    .study-desc {
      color: var(--dark-gray);
      font-size: 14px;
      margin-bottom: 15px;
    }
    
    /* Dark Mode Toggle */
    .dark-mode-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--primary-color);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      z-index: 100;
      transition: all 0.3s ease;
    }
    
    .dark-mode-toggle:hover {
      transform: scale(1.1);
    }
    
    /* Error Message */
    .error-message {
      color: var(--accent-color);
      font-size: 0.9rem;
      margin-top: 5px;
      display: none;
    }
    
    /* Responsive Styles */
    @media (max-width: 992px) {
      .sidebar {
        width: 200px;
      }
      
      .content {
        padding: 20px;
      }
      
      .dashboard-cards {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      }
    }
    
    @media (max-width: 768px) {
      .main-container {
        flex-direction: column;
      }
      
      .sidebar {
        width: 100%;
        padding: 10px 0;
      }
      
      .sidebar-menu {
        display: flex;
        overflow-x: auto;
        padding: 0 10px;

      }
      
      .sidebar-menu li {
        margin-right: 10px;
        margin-bottom: 0;
        white-space: nowrap;
        color: white;
        flex: none;

      }
      
      .dashboard-cards {
        grid-template-columns: 1fr;
      }
      
      .auth-container {
        padding: 1.5rem;
        margin: 1rem;
      }

      .file-actions {
        flex-direction: column;
      }

      .sermon-search {
        margin-left: 0;
        margin-top: 10px;
        width: 100%;
        max-width: 100%;
      }
      
      .whiteboard-canvas {
        height: 400px;
      }
    }
    
    @media (max-width: 576px) {
      .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
        padding: 15px;
      }
      
      .user-controls {
        width: 100%;
        justify-content: space-between;
      }
      
      .auth-container {
        padding: 1.5rem;
        margin: 1rem;
      }
      
      .modal-content {
        width: 95%;
        padding: 15px;
      }
      
      .whiteboard-canvas {
        height: 300px;
      }
      
      .recording-controls {
        flex-direction: column;
        align-items: center;
      }
    }
    
    /* Animation */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease forwards;
    }
    
    /* Password strength indicator */
    .password-strength {
      height: 5px;
      background: #eee;
      border-radius: 3px;
      margin-top: 5px;
      overflow: hidden;
    }
    
    .password-strength-bar {
      height: 100%;
      width: 0;
      background: #ff4757;
      transition: width 0.3s ease, background 0.3s ease;
    }
    
    /* Loading spinner */
    .spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    audio {
      width: 100%;
      outline: none;
      border-radius: 5px;
      margin-top: 10px;
    }
    .auth-container.dark-mode {
      background-image: url(RI.jpeg);
      color: var(--white);
    }
    header{
      background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8));
      letter-spacing: 2px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: typing 4s steps(40, end), blink-caret .75s step-end infinite;
      white-space: nowrap;
      overflow: hidden;
      animation: animate-gradient 3s linear infinite;
    }
    @keyframes animate-gradient {
            0% {
                background-position: 0%;
            }
            100% {
                background-position: 200%;
            }
        }
    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }
    @keyframes blink-caret {
      from, to { border-color: transparent }
      50% { border-color: orange; }
    }
    h2{
      text-align: center;
      margin-bottom: 1rem;
      color: var(--primary-color);
      background-image: url(MJ.jpeg);
      text-decoration: underline;
      animation: animate-gradient 3s linear infinite;
      background: linear-gradient(90deg, blueviolet, #ee0979, hsl(276, 100%, 50%), blue, #ee0979, blueviolet);
      white-space: nowrap;
      animation: typing 4s steps(30, end) infinite, blink-caret .75s step-end infinite;
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    @keyframes animate-gradient {
            0% {
                background-position: 0%;
            }
            100% {
                background-position: 200%;
            }
        }
        button.logout-btn {
      background: teal;
      color: white;
    }
    button.logout-btn:hover {
      background: blue;
      transform: translateY(-2px);
      color: white;
    }
    .sidebar-menu a.active {
      background: var(--accent-color);
      color: white;
      font-weight: 600;
    }
    .sidebar-menu a.active:hover {
      background: teal;
    }



  </style>
</head>
<body class="auth-page">
  <!-- Authentication Container -->
  <div class="auth-container" id="authContainer">
    <h2 id="authTitle">LOG TO YOUR ACCOUNT</h2>
    <form id="authForm">
      <div id="nameGroup" class="form-group" style="display: none;">
        <label for="name">Full Name</label>
        <input type="text" id="name" placeholder="Enter your full name" />
      </div>
      
      <div class="form-group">
        <label for="email">Email Address</label>
        <input type="email" id="email" placeholder="Enter your email" required />
        <div class="error-message" id="emailError"></div>
      </div>
      
      <div class="form-group">
        <label for="password">Password</label>
        <input type="password" id="password" placeholder="Enter your password" required />
        <div class="password-strength">
          <div class="password-strength-bar" id="passwordStrength"></div>
        </div>
        <div class="error-message" id="passwordError"></div>
      </div>
      
      <div id="confirmPasswordGroup" class="form-group" style="display: none;">
        <label for="confirmPassword">Confirm Password</label>
        <input type="password" id="confirmPassword" placeholder="Confirm your password" />
        <div class="error-message" id="confirmPasswordError"></div>
      </div>
      
      <div id="photoGroup" class="form-group" style="display: none;">
        <label for="photo">Profile Photo</label>
        <input type="file" id="photo" accept="image/*" />
        <img id="photoPreview" class="photo-preview" src="#" alt="Profile Photo Preview" style="display: none;" />
      </div>
      
      <button type="submit" class="btn" id="submitBtn">
        <i class="fas fa-sign-in-alt"></i> <span id="submitBtnText">Login</span>
      </button>
      
      <div class="options">
        <a href="#" id="toggleAuth">Create an account</a> | 
        <a href="#" id="forgotPassword">Forgot password?</a>
      </div>
      
      <div class="divider"><span>or</span></div>
      
      <div class="social-buttons">
        <div class="social-btn" onclick="loginWithGoogle()">
          <img src="https://cdn-icons-png.flaticon.com/512/281/281764.png" alt="Google" />
          Continue with Google
        </div>
        <div class="social-btn" onclick="loginWithFacebook()">
          <img src="https://cdn-icons-png.flaticon.com/512/145/145802.png" alt="Facebook" />
          Continue with Facebook
        </div>
      </div>
    </form>
  </div>
  
  <!-- Main Application (Hidden by default) -->
  <div id="appContainer" style="display: none;">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <i class="fas fa-church"></i>
        <span>REVEREND GEORGE OMONDI EVANGELISM MINISTRY</span>
      </div>
      <div class="user-controls">
        <span id="welcomeMessage">Welcome, User!</span>
        <img id="userPhoto" src="https://via.placeholder.com/40" alt="User" class="photo-preview" style="width: 40px; height: 40px; display: none;">
        <button class="logout-btn" id="logoutBtn">
          <i class="fas fa-sign-out-alt"></i> Logout
        </button>
      </div>
    </header>
    
    <!-- Main Container -->
    <div class="main-container">
      <!-- Sidebar Navigation -->
      <nav class="sidebar">
        <ul class="sidebar-menu">
          <li>
            <a href="#" class="active" data-section="dashboard">
              <i class="fas fa-tachometer-alt"></i> Dashboard
            </a>
          </li>
          <li>
            <a href="#" data-section="ministry">
              <i class="fas fa-church"></i> Ministry
            </a>
          </li>
          <li>
            <a href="#" data-section="events">
              <i class="fas fa-calendar-alt"></i> Events
            </a>
          </li>
          <li>
            <a href="#" data-section="sermons">
              <i class="fas fa-bible"></i> Sermons
            </a>
          </li>
          <li>
            <a href="#" data-section="donations">
              <i class="fas fa-donate"></i> Donations
            </a>
          </li>
          <li>
            <a href="#" data-section="children">
              <i class="fas fa-child"></i> Children's Bible Study
            </a>
          </li>
          <li>
            <a href="#" data-section="prayer">
              <i class="fas fa-pray"></i> Prayer
            </a>
          </li>
          <li>
            <a href="#" data-section="notes">
              <i class="fas fa-book"></i> Notes
            </a>
          </li>
          <li>
            <a href="#" data-section="teaching">
              <i class="fas fa-chalkboard-teacher"></i> Teaching
            </a>
          </li>
          <li>
            <a href="#" data-section="whiteboard">
              <i class="fas fa-paint-brush"></i> Whiteboard
            </a>
          </li>
          <li>
            <a href="#" data-section="files">
              <i class="fas fa-folder"></i> Files
            </a>
          </li>
        </ul>
      </nav>
      
      <!-- Content Area -->
      <main class="content">
        <!-- Dashboard Section (Default View) -->
        <section id="dashboard-section">
          <h2 class="section-title">
            <i class="fas fa-tachometer-alt"></i> Ministry Dashboard
          </h2>
          
          <div class="dashboard-cards">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Upcoming Events</h3>
                <div class="card-icon" style="background: var(--primary-color);">
                  <i class="fas fa-calendar-alt"></i>
                </div>
              </div>
              <div class="card-content">
                <p>View and manage ministry events</p>
                <button class="btn" style="margin-top: 10px;" onclick="showSection('events')">
                  View Events
                </button>
              </div>
            </div>
            
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Sermons</h3>
                <div class="card-icon" style="background: var(--secondary-color);">
                  <i class="fas fa-bible"></i>
                </div>
              </div>
              <div class="card-content">
                <p>Access sermon library and resources</p>
                <button class="btn" style="margin-top: 10px;" onclick="showSection('sermons')">
                  View Sermons
                </button>
              </div>
            </div>
            
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Prayer Requests</h3>
                <div class="card-icon" style="background: var(--success-color);">
                  <i class="fas fa-pray"></i>
                </div>
              </div>
              <div class="card-content">
                <p>Submit and view prayer requests</p>
                <button class="btn" style="margin-top: 10px;" onclick="showSection('prayer')">
                  Prayer Wall
                </button>
              </div>
            </div>
          </div>
          
          <h3 class="section-title">
            <i class="fas fa-calendar-check"></i> Upcoming Events
          </h3>
          
          <div class="events-list">
            <div class="event-item">
              <div class="event-date">
                <span class="day">15</span>
                <span class="month">Jun</span>
              </div>
              <div class="event-details">
                <h4>Sunday Service</h4>
                <p>10:00 AM - Main Sanctuary</p>
              </div>
            </div>
            
            <div class="event-item">
              <div class="event-date">
                <span class="day">20</span>
                <span class="month">Jun</span>
              </div>
              <div class="event-details">
                <h4>Bible Study</h4>
                <p>7:00 PM - Fellowship Hall</p>
              </div>
            </div>
            
            <div class="event-item">
              <div class="event-date">
                <span class="day">25</span>
                <span class="month">Jun</span>
              </div>
              <div class="event-details">
                <h4>Community Outreach</h4>
                <p>9:00 AM - City Park</p>
              </div>
            </div>
          </div>
        </section>
        
        <!-- Ministry Section -->
        <section id="ministry-section" style="display: none;">
          <h2 class="section-title">
            <i class="fas fa-church"></i> Ministry
          </h2>
          
          <div class="dashboard-grid">
            <div class="dashboard-card" onclick="showSection('events')">
              <div class="card-icon">
                <i class="fas fa-calendar-alt"></i>
              </div>
              <h3 class="card-title">Upcoming Events</h3>
              <p class="card-desc">View and manage ministry events</p>
            </div>
            
            <div class="dashboard-card" onclick="showSection('sermons')">
              <div class="card-icon">
                <i class="fas fa-bible"></i>
              </div>
              <h3 class="card-title">Sermons</h3>
              <p class="card-desc">Access sermon library</p>
            </div>
            
            <div class="dashboard-card" onclick="showSection('prayer')">
              <div class="card-icon">
                <i class="fas fa-pray"></i>
              </div>
              <h3 class="card-title">Prayer Requests</h3>
              <p class="card-desc">Submit and view prayers</p>
            </div>
            
            <div class="dashboard-card" onclick="showSection('donations')">
              <div class="card-icon">
                <i class="fas fa-donate"></i>
              </div>
              <h3 class="card-title">Donations</h3>
              <p class="card-desc">Support the ministry</p>
            </div>
          </div>
        </section>
        
        <!-- Events Section -->
        <section id="events-section" style="display: none;">
          <h2 class="section-title">
            <i class="fas fa-calendar-alt"></i> Events
          </h2>
          
          <div class="calendar-container">
            <div class="calendar-header">
              <h3 id="calendarMonthYear">Month Year</h3>
              <div class="calendar-nav">
                <div class="calendar-nav-btn" onclick="prevMonth()">
                  <i class="fas fa-chevron-left"></i>
                </div>
                <div class="calendar-nav-btn" onclick="nextMonth()">
                  <i class="fas fa-chevron-right"></i>
                </div>
              </div>
            </div>
            <div class="calendar-grid" id="calendarGrid">
              <!-- Calendar days will be added here dynamically -->
            </div>
          </div>
          
          <div class="events-list">
            <div class="event-item">
              <div class="event-date">
                <span class="day">15</span>
                <span class="month">Jun</span>
              </div>
              <div class="event-details">
                <h4>Sunday Service</h4>
                <p>10:00 AM - Main Sanctuary</p>
              </div>
            </div>
            
            <div class="event-item">
              <div class="event-date">
                <span class="day">20</span>
                <span class="month">Jun</span>
              </div>
              <div class="event-details">
                <h4>Bible Study</h4>
                <p>7:00 PM - Fellowship Hall</p>
              </div>
            </div>
            
            <div class="event-item">
              <div class="event-date">
                <span class="day">25</span>
                <span class="month">Jun</span>
              </div>
              <div class="event-details">
                <h4>Community Outreach</h4>
                <p>9:00 AM - City Park</p>
              </div>
            </div>
          </div>
        </section>
        
        <!-- Sermons Section -->
        <section id="sermons-section" style="display: none;">
          <h2 class="section-title">
            <i class="fas fa-bible"></i> Sermons
          </h2>
          
          <div class="file-manager-container">
            <div class="file-actions">
              <button class="btn btn-primary" onclick="openSermonUploadModal()">
                <i class="fas fa-upload"></i> Upload Sermon
              </button>
              <button class="btn btn-secondary" onclick="createSermonSeries()">
                <i class="fas fa-folder-plus"></i> New Series
              </button>
              <button class="btn btn-success" onclick="openRecordingModal()">
                <i class="fas fa-microphone"></i> Record Sermon
              </button>
              <div class="sermon-search">
                <input type="text" id="sermonSearch" placeholder="Search sermons...">
                <button class="btn" onclick="searchSermons()" style="margin-left: 5px;">
                  <i class="fas fa-search"></i>
                </button>
              </div>
            </div>
            <div class="file-list" id="sermonList">
              <div class="file-item">
                <div class="file-icon">
                  <i class="fas fa-file-audio"></i>
                </div>
                <div class="file-name">The Power of Faith</div>
                <div class="file-meta">
                  <small>Rev. George Omondi • Jun 15, 2023</small>
                  <small><br>Series: Faith Series</small>
                </div>
                <div class="file-actions">
                  <button class="btn btn-primary" onclick="playSermon(1)">
                    <i class="fas fa-play"></i> Play
                  </button>
                  <button class="btn btn-secondary" onclick="downloadSermon(1)">
                    <i class="fas fa-download"></i> Download
                  </button>
                </div>
              </div>
              <div class="file-item">
                <div class="file-icon">
                  <i class="fas fa-file-video"></i>
                </div>
                <div class="file-name">Walking in Love</div>
                <div class="file-meta">
                  <small>Rev. George Omondi • Jun 8, 2023</small>
                  <small><br>Series: Love Series</small>
                </div>
                <div class="file-actions">
                  <button class="btn btn-primary" onclick="playSermon(2)">
                    <i class="fas fa-play"></i> Play
                  </button>
                  <button class="btn btn-secondary" onclick="downloadSermon(2)">
                    <i class="fas fa-download"></i> Download
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>
        
        <!-- Donations Section -->
        <section id="donations-section" style="display: none;">
          <h2 class="section-title">
            <i class="fas fa-donate"></i> Support the Ministry
          </h2>
          
          <div class="donation-methods">
            <div class="donation-card">
              <div class="donation-icon">
                <i class="fas fa-mobile-alt"></i>
              </div>
              <h3 class="donation-title">M-Pesa</h3>
              <p class="donation-desc">Make donations via M-Pesa mobile money transfer</p>
              <div class="donation-details">
                <p><strong>Paybill Number:</strong> <span id="mpesaPaybill">123456</span></p>
                <p><strong>Account Number:</strong> <span id="mpesaAccount">MINISTRY</span></p>
              </div>
              <button class="btn btn-success" onclick="copyMpesaDetails()">
                <i class="fas fa-copy"></i> Copy Details
              </button>
              <button class="btn btn-secondary" onclick="openEditMpesaModal()" style="margin-top: 10px;">
                <i class="fas fa-edit"></i> Edit Details
              </button>
            </div>
            
            <div class="donation-card">
              <div class="donation-icon">
                <i class="fas fa-credit-card"></i>
              </div>
              <h3 class="donation-title">Credit/Debit Card</h3>
              <p class="donation-desc">Make secure online donations using your card</p>
              <button class="btn btn-primary" onclick="openCardDonationModal()">
                <i class="fas fa-donate"></i> Donate Now
              </button>
            </div>
            
            <div class="donation-card">
              <div class="donation-icon">
                <i class="fas fa-bank"></i>
              </div>
              <h3 class="donation-title">Bank Transfer</h3>
              <p class="donation-desc">Direct bank transfers to our ministry account</p>
              <div class="donation-details">
                <p><strong>Bank Name:</strong> <span id="bankName">KCB Bank</span></p>
                <p><strong>Account Name:</strong> <span id="bankAccountName">Rev. George Omondi Ministry</span></p>
                <p><strong>Account Number:</strong> <span id="bankAccountNumber">1234567890</span></p>
                <p><strong>Branch:</strong> <span id="bankBranch">Nairobi Main</span></p>
              </div>
              <button class="btn btn-success" onclick="copyBankDetails()">
                <i class="fas fa-copy"></i> Copy Details
              </button>
              <button class="btn btn-secondary" onclick="openEditBankModal()" style="margin-top: 10px;">
                <i class="fas fa-edit"></i> Edit Details
              </button>
            </div>
          </div>
          
          <div class="card" style="margin-top: 30px;">
            <div class="card-header">
              <h3 class="card-title">Recent Donations</h3>
              <div class="card-icon" style="background: var(--success-color);">
                <i class="fas fa-hand-holding-usd"></i>
              </div>
            </div>
            <div class="card-content">
              <p>Thank you to our recent donors for supporting the ministry:</p>
              <ul style="margin-top: 10px; padding-left: 20px;">
                <li>John M. - KSh 5,000</li>
                <li>Sarah W. - KSh 2,500</li>
                <li>Anonymous - KSh 10,000</li>
                <li>Prayer Group - KSh 7,200</li>
              </ul>
            </div>
          </div>
        </section>
        
        <!-- Children's Bible Study Section -->
        <section id="children-section" style="display: none;">
          <h2 class="section-title">
            <i class="fas fa-child"></i> Children's Bible Study
          </h2>
          
          <div class="kids-section">
            <h3><i class="fas fa-video"></i> Bible Stories for Kids</h3>
            <p>Enjoy these wonderful Bible stories and lessons for children:</p>
            
            <div class="kids-videos">
              <div class="video-card">
                <div class="video-container">
                  <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
                <div class="video-info">
                  <h4 class="video-title">David and Goliath</h4>
                  <p class="video-desc">The classic story of David and Goliath for children</p>
                </div>
              </div>
              
              <div class="video-card">
                <div class="video-container">
                  <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
                <div class="video-info">
                  <h4 class="video-title">Noah's Ark</h4>
                  <p class="video-desc">The story of Noah and the great flood</p>
                </div>
              </div>
              
              <div class="video-card">
                <div class="video-container">
                  <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
                <div class="video-info">
                  <h4 class="video-title">Jonah and the Whale</h4>
                  <p class="video-desc">The story of Jonah and the big fish</p>
                </div>
              </div>
              
              <div class="video-card">
                <div class="video-container">
                  <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
                <div class="video-info">
                  <h4 class="video-title">The Birth of Jesus</h4>
                  <p class="video-desc">The Christmas story for children</p>
                </div>
              </div>
            </div>
            
            <button class="btn btn-kids" onclick="openAddVideoModal()" style="margin-top: 20px;">
              <i class="fas fa-plus"></i> Add New Video
            </button>
          </div>
          
          <div class="kids-section" style="margin-top: 30px;">
            <h3><i class="fas fa-chalkboard-teacher"></i> Online Bible Study Sessions</h3>
            <p>Join our online Bible study sessions for children:</p>
            
            <div class="online-study-options">
              <div class="study-option">
                <div class="study-icon">
                  <i class="fab fa-google"></i>
                </div>
                <h4 class="study-title">Google Meet</h4>
                <p class="study-desc">Join our weekly Bible study sessions via Google Meet</p>
                <button class="btn btn-kids" onclick="joinGoogleMeet()">
                  <i class="fas fa-video"></i> Join Now
                </button>
              </div>
              
              <div class="study-option">
                <div class="study-icon">
                  <i class="fab fa-whatsapp"></i>
                </div>
                <h4 class="study-title">WhatsApp Group</h4>
                <p class="study-desc">Join our WhatsApp group for daily Bible lessons</p>
                <button class="btn btn-kids" onclick="joinWhatsAppGroup()">
                  <i class="fas fa-comments"></i> Join Group
                </button>
              </div>
              
              <div class="study-option">
                <div class="study-icon">
                  <i class="fab fa-facebook"></i>
                </div>
                <h4 class="study-title">Facebook Live</h4>
                <p class="study-desc">Watch our live Bible study sessions on Facebook</p>
                <button class="btn btn-kids" onclick="joinFacebookLive()">
                  <i class="fas fa-tv"></i> Watch Live
                </button>
              </div>
              
              <div class="study-option">
                <div class="study-icon">
                  <i class="fas fa-calendar-alt"></i>
                </div>
                <h4 class="study-title">Upcoming Sessions</h4>
                <p class="study-desc">View our schedule of upcoming Bible study sessions</p>
                <button class="btn btn-kids" onclick="showKidsSchedule()">
                  <i class="fas fa-list"></i> View Schedule
                </button>
              </div>
            </div>
          </div>
        </section>
        
        <!-- Prayer Section -->
        <section id="prayer-section" style="display: none;">
          <h2 class="section-title">
            <i class="fas fa-pray"></i> Prayer Requests
          </h2>
          
          <button class="add-note-btn" onclick="openPrayerModal()">
            <i class="fas fa-plus"></i> Add Prayer Request
          </button>
          
          <div class="notes-container" id="prayerContainer">
            <div class="note-card">
              <h3 class="note-title">Healing for Sarah</h3>
              <p class="note-content">Please pray for complete healing for Sarah who is battling cancer. The doctors have given a good prognosis but she needs strength.</p>
              <p class="note-date">Submitted: June 10, 2023</p>
              <div class="note-actions">
                <button class="btn btn-primary">I Prayed</button>
                <button class="btn btn-secondary">Share</button>
              </div>
            </div>
            
            <div class="note-card">
              <h3 class="note-title">Financial Breakthrough</h3>
              <p class="note-content">Our family is facing financial difficulties after unexpected medical bills. Praying for God's provision and wisdom.</p>
              <p class="note-date">Submitted: June 8, 2023</p>
              <div class="note-actions">
                <button class="btn btn-primary">I Prayed</button>
                <button class="btn btn-secondary">Share</button>
              </div>
            </div>
            
            <div class="note-card">
              <h3 class="note-title">Ministry Growth</h3>
              <p class="note-content">Praying for God to expand our ministry's reach and impact in the community. For open doors and divine connections.</p>
              <p class="note-date">Submitted: June 5, 2023</p>
              <div class="note-actions">
                <button class="btn btn-primary">I Prayed</button>
                <button class="btn btn-secondary">Share</button>
              </div>
            </div>
          </div>
        </section>
        
        <!-- Notes Section -->
        <section id="notes-section" style="display: none;">
          <h2 class="section-title">
            <i class="fas fa-book"></i> My Notes
          </h2>
          
          <button class="add-note-btn" onclick="openNoteModal()">
            <i class="fas fa-plus"></i> Add New Note
          </button>
          
          <div class="notes-container" id="notesContainer">
            <!-- Notes will be added here dynamically -->
          </div>
        </section>
        
        <!-- Teaching Tools Section -->
        <section id="teaching-section" style="display: none;">
          <h2 class="section-title">
            <i class="fas fa-chalkboard-teacher"></i> Teaching Tools
          </h2>
          
          <div class="teaching-tools">
            <div class="tool-card" onclick="openVirtualClassroom()">
              <div class="tool-icon">
                <i class="fas fa-video"></i>
              </div>
              <h3 class="tool-title">Virtual Classroom</h3>
              <p class="tool-desc">Start a live video session with your students</p>
              <div class="tool-options" id="virtualClassOptions">
                <button class="btn btn-primary" onclick="startWhatsAppMeeting()" style="margin-bottom: 5px;">
                  <i class="fab fa-whatsapp"></i> Start WhatsApp Meeting
                </button>
                <button class="btn btn-accent" onclick="startGoogleMeet()">
                  <i class="fab fa-google"></i> Start Google Meet
                </button>
              </div>
            </div>
            
            <div class="tool-card" onclick="connectToMicrosoftWord()">
              <div class="tool-icon">
                <i class="fab fa-microsoft"></i>
              </div>
              <h3 class="tool-title">Microsoft Word</h3>
              <p class="tool-desc">Open and edit documents in Word</p>
            </div>
            
            <div class="tool-card" onclick="openScreenShare()">
              <div class="tool-icon">
                <i class="fas fa-desktop"></i>
              </div>
              <h3 class="tool-title">Screen Sharing</h3>
              <p class="tool-desc">Share your screen with the class</p>
              <div class="tool-options" id="screenShareOptions">
                <button class="btn btn-primary" onclick="shareViaWhatsApp()" style="margin-bottom: 5px;">
                  <i class="fab fa-whatsapp"></i> Share via WhatsApp
                </button>
                <button class="btn btn-accent" onclick="shareViaGoogleMeet()">
                  <i class="fab fa-google"></i> Share via Google Meet
                </button>
              </div>
            </div>
            
            <div class="tool-card" onclick="openResourceLibrary()">
              <div class="tool-icon">
                <i class="fas fa-book-open"></i>
              </div>
              <h3 class="tool-title">Resource Library</h3>
              <p class="tool-desc">Access Bible versions & Biblical sites</p>
              <div class="tool-options" id="resourceLibraryOptions">
                <button class="btn btn-primary" onclick="showBibleVersions()">
                  <i class="fas fa-bible"></i> Bible Versions
                </button>
                <button class="btn btn-secondary" onclick="showBiblicalSites()">
                  <i class="fas fa-map-marked-alt"></i> Biblical Sites
                </button>
              </div>
            </div>
          </div>
        </section>
        
        <!-- Whiteboard Section -->
        <section id="whiteboard-section" style="display: none;">
          <h2 class="section-title">
            <i class="fas fa-paint-brush"></i> Interactive Whiteboard
          </h2>
          
          <div class="whiteboard-container">
            <div class="whiteboard-tools">
              <div class="whiteboard-tool active" data-tool="pen" title="Pen">
                <i class="fas fa-pen"></i>
              </div>
              <div class="whiteboard-tool" data-tool="eraser" title="Eraser">
                <i class="fas fa-eraser"></i>
              </div>
              <div class="whiteboard-tool" data-tool="text" title="Text">
                <i class="fas fa-font"></i>
              </div>
              <div class="whiteboard-tool" data-tool="shape" title="Shapes">
                <i class="fas fa-shapes"></i>
              </div>
              <div class="whiteboard-tool" data-tool="clear" title="Clear">
                <i class="fas fa-trash-alt"></i>
              </div>
              <input type="color" id="colorPicker" value="#000000">
            </div>
            <canvas class="whiteboard-canvas" id="whiteboardCanvas"></canvas>
          </div>
        </section>
        
        <!-- File Manager Section -->
        <section id="files-section" style="display: none;">
          <h2 class="section-title">
            <i class="fas fa-folder"></i> File Manager
          </h2>
          
          <div class="file-manager-container">
            <div class="file-actions">
              <button class="btn btn-primary" onclick="uploadFile()">
                <i class="fas fa-upload"></i> Upload
              </button>
              <button class="btn btn-secondary" onclick="createFolder()">
                <i class="fas fa-folder-plus"></i> New Folder
              </button>
            </div>
            <div class="file-list" id="fileList">
              <div class="file-item">
                <div class="file-icon">
                  <i class="fas fa-file-pdf"></i>
                </div>
                <div class="file-name">Ministry Brochure.pdf</div>
                <div class="file-meta">
                  <small>2.4 MB • Jun 1, 2023</small>
                </div>
              </div>
              <div class="file-item">
                <div class="file-icon">
                  <i class="fas fa-file-word"></i>
                </div>
                <div class="file-name">Sermon Notes.docx</div>
                <div class="file-meta">
                  <small>1.2 MB • May 28, 2023</small>
                </div>
              </div>
              <div class="file-item">
                <div class="file-icon">
                  <i class="fas fa-folder"></i>
                </div>
                <div class="file-name">Sermon Series</div>
                <div class="file-meta">
                  <small>15 items • Updated today</small>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>
  
  <!-- Note Modal -->
  <div class="modal" id="noteModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="noteModalTitle">Add New Note</h3>
        <button class="close-modal" onclick="closeNoteModal()">&times;</button>
      </div>
      <form id="noteForm">
        <input type="hidden" id="noteId">
        <div class="form-group">
          <label for="noteTitle">Title</label>
          <input type="text" class="form-control" id="noteTitle" required>
        </div>
        <div class="form-group">
          <label for="noteContent">Content</label>
          <textarea class="form-control" id="noteContent" required></textarea>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closeNoteModal()">Cancel</button>
          <button type="submit" class="btn btn-primary">Save Note</button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- Prayer Modal -->
  <div class="modal" id="prayerModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Add Prayer Request</h3>
        <button class="close-modal" onclick="closePrayerModal()">&times;</button>
      </div>
      <form id="prayerForm">
        <div class="form-group">
          <label for="prayerTitle">Title</label>
          <input type="text" class="form-control" id="prayerTitle" required>
        </div>
        <div class="form-group">
          <label for="prayerContent">Your Prayer Request</label>
          <textarea class="form-control" id="prayerContent" required></textarea>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="anonymousPrayer"> Post anonymously
          </label>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closePrayerModal()">Cancel</button>
          <button type="submit" class="btn btn-primary">Submit Prayer</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Sermon Upload Modal -->
  <div class="modal" id="sermonUploadModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Upload New Sermon</h3>
        <button class="close-modal" onclick="closeSermonUploadModal()">&times;</button>
      </div>
      <form id="sermonUploadForm">
        <div class="form-group">
          <label for="sermonTitle">Sermon Title</label>
          <input type="text" class="form-control" id="sermonTitle" required>
        </div>
        <div class="form-group">
          <label for="sermonSpeaker">Speaker</label>
          <input type="text" class="form-control" id="sermonSpeaker" required>
        </div>
        <div class="form-group">
          <label for="sermonDate">Date</label>
          <input type="date" class="form-control" id="sermonDate" required>
        </div>
        <div class="form-group">
          <label for="sermonSeries">Series (optional)</label>
          <input type="text" class="form-control" id="sermonSeries">
        </div>
        <div class="form-group">
          <label for="sermonDescription">Description</label>
          <textarea class="form-control" id="sermonDescription" rows="3"></textarea>
        </div>
        <div class="form-group">
          <label for="sermonFile">Sermon File</label>
          <input type="file" class="form-control" id="sermonFile" accept="audio/*,video/*,application/pdf" required>
          <small>Supported formats: MP3, MP4, PDF</small>
        </div>
        <div class="form-group">
          <label for="sermonThumbnail">Thumbnail Image (optional)</label>
          <input type="file" class="form-control" id="sermonThumbnail" accept="image/*">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closeSermonUploadModal()">Cancel</button>
          <button type="submit" class="btn btn-primary">Upload Sermon</button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- Recording Modal -->
  <div class="modal" id="recordingModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Record New Sermon</h3>
        <button class="close-modal" onclick="closeRecordingModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="recording-container">
          <p>Click the record button below to start recording your sermon. Make sure you have a working microphone.</p>
          
          <div id="audioVisualizer">
            <audio controls loop muted id="visualizerAudio">
              <source src="Alan Walker - Faded (Instrumental Version)(M4A_128K).m4a" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </div>
          
          <div class="recording-controls">
            <button class="btn btn-accent" id="recordButton" onclick="toggleRecording()">
              <i class="fas fa-microphone"></i> Start Recording
            </button>
            <button class="btn btn-secondary" id="stopButton" onclick="stopRecording()" disabled>
              <i class="fas fa-stop"></i> Stop
            </button>
            <button class="btn btn-primary" id="saveButton" onclick="saveRecording()" disabled>
              <i class="fas fa-save"></i> Save
            </button>
          </div>
          
          <audio id="recordingPreview" class="recording-preview" controls></audio>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Donation Modal -->
  <div class="modal" id="donationModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Make a Donation</h3>
        <button class="close-modal" onclick="closeDonationModal()">&times;</button>
      </div>
      <form id="donationForm">
        <div class="form-group">
          <label for="donationAmount">Amount (KSh)</label>
          <input type="number" class="form-control" id="donationAmount" min="10" required>
        </div>
        <div class="form-group">
          <label for="donationName">Your Name (optional)</label>
          <input type="text" class="form-control" id="donationName">
        </div>
        <div class="form-group">
          <label for="donationPhone">Phone Number (for M-Pesa)</label>
          <input type="tel" class="form-control" id="donationPhone" placeholder="e.g. 254712345678" required>
        </div>
        <div class="form-group">
          <label for="donationMessage">Message (optional)</label>
          <textarea class="form-control" id="donationMessage" rows="3"></textarea>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closeDonationModal()">Cancel</button>
          <button type="submit" class="btn btn-success">
            <i class="fas fa-donate"></i> Process Donation
          </button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- Edit M-Pesa Details Modal -->
  <div class="modal" id="editMpesaModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Edit M-Pesa Details</h3>
        <button class="close-modal" onclick="closeEditMpesaModal()">&times;</button>
      </div>
      <form id="mpesaForm">
        <div class="form-group">
          <label for="editPaybill">Paybill Number</label>
          <input type="text" class="form-control" id="editPaybill" required>
        </div>
        <div class="form-group">
          <label for="editAccount">Account Name</label>
          <input type="text" class="form-control" id="editAccount" required>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closeEditMpesaModal()">Cancel</button>
          <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- Edit Bank Details Modal -->
  <div class="modal" id="editBankModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Edit Bank Details</h3>
        <button class="close-modal" onclick="closeEditBankModal()">&times;</button>
      </div>
      <form id="bankForm">
        <div class="form-group">
          <label for="editBankName">Bank Name</label>
          <input type="text" class="form-control" id="editBankName" required>
        </div>
        <div class="form-group">
          <label for="editAccountName">Account Name</label>
          <input type="text" class="form-control" id="editAccountName" required>
        </div>
        <div class="form-group">
          <label for="editAccountNumber">Account Number</label>
          <input type="text" class="form-control" id="editAccountNumber" required>
        </div>
        <div class="form-group">
          <label for="editBankBranch">Branch</label>
          <input type="text" class="form-control" id="editBankBranch" required>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closeEditBankModal()">Cancel</button>
          <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- Add Video Modal -->
  <div class="modal" id="addVideoModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Add New Bible Story Video</h3>
        <button class="close-modal" onclick="closeAddVideoModal()">&times;</button>
      </div>
      <form id="videoForm">
        <div class="form-group">
          <label for="videoTitle">Video Title</label>
          <input type="text" class="form-control" id="videoTitle" required>
        </div>
        <div class="form-group">
          <label for="videoUrl">YouTube Video URL</label>
          <input type="url" class="form-control" id="videoUrl" placeholder="https://www.youtube.com/embed/..." required>
        </div>
        <div class="form-group">
          <label for="videoDescription">Description</label>
          <textarea class="form-control" id="videoDescription" rows="3"></textarea>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closeAddVideoModal()">Cancel</button>
          <button type="submit" class="btn btn-kids">Add Video</button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- Resource Library Modal -->
  <div class="modal" id="resourceModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="resourceModalTitle">Resource Library</h3>
        <button class="close-modal" onclick="closeResourceModal()">&times;</button>
      </div>
      <div class="modal-body" id="resourceModalBody">
        <!-- Content will be loaded dynamically -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="closeResourceModal()">Close</button>
      </div>
    </div>
  </div>
  
  <!-- Dark Mode Toggle -->
  <div class="dark-mode-toggle" id="darkModeToggle">
    <i class="fas fa-moon"></i>
  </div>
  
  <script>
    // DOM Elements
    const authContainer = document.getElementById('authContainer');
    const appContainer = document.getElementById('appContainer');
    const authForm = document.getElementById('authForm');
    const authTitle = document.getElementById('authTitle');
    const submitBtn = document.getElementById('submitBtn');
    const submitBtnText = document.getElementById('submitBtnText');
    const toggleAuth = document.getElementById('toggleAuth');
    const forgotPassword = document.getElementById('forgotPassword');
    const photoInput = document.getElementById('photo');
    const photoPreview = document.getElementById('photoPreview');
    const photoGroup = document.getElementById('photoGroup');
    const nameGroup = document.getElementById('nameGroup');
    const confirmPasswordGroup = document.getElementById('confirmPasswordGroup');
    const logoutBtn = document.getElementById('logoutBtn');
    const welcomeMessage = document.getElementById('welcomeMessage');
    const userPhoto = document.getElementById('userPhoto');
    const darkModeToggle = document.getElementById('darkModeToggle');
    const passwordStrength = document.getElementById('passwordStrength');
    const emailError = document.getElementById('emailError');
    const passwordError = document.getElementById('passwordError');
    const confirmPasswordError = document.getElementById('confirmPasswordError');
    
    // Bible versions data
    const bibleVersions = [
      { name: "King James Version (KJV)", url: "https://www.biblegateway.com/versions/King-James-Version-KJV-Bible/" },
      { name: "New International Version (NIV)", url: "https://www.biblegateway.com/versions/New-International-Version-NIV-Bible/" },
      { name: "English Standard Version (ESV)", url: "https://www.biblegateway.com/versions/English-Standard-Version-ESV-Bible/" },
      { name: "New Living Translation (NLT)", url: "https://www.biblegateway.com/versions/New-Living-Translation-NLT-Bible/" },
      { name: "Amplified Bible (AMP)", url: "https://www.biblegateway.com/versions/Amplified-Bible-AMP/" },
      { name: "Christian Standard Bible (CSB)", url: "https://www.biblegateway.com/versions/Christian-Standard-Bible-CSB/" },
      { name: "New King James Version (NKJV)", url: "https://www.biblegateway.com/versions/New-King-James-Version-NKJV-Bible/" },
      { name: "The Message (MSG)", url: "https://www.biblegateway.com/versions/Message-MSG-Bible/" }
    ];

    // Biblical sites data
    const biblicalSites = [
      { name: "Jerusalem", url: "https://www.goisrael.com/destinations/jerusalem" },
      { name: "Mount Sinai", url: "https://www.sinai.travel/" },
      { name: "Nazareth", url: "https://www.goisrael.com/destinations/nazareth" },
      { name: "Bethlehem", url: "https://www.goisrael.com/destinations/bethlehem" },
      { name: "Sea of Galilee", url: "https://www.goisrael.com/destinations/galilee" },
      { name: "Jordan River", url: "https://www.touristisrael.com/jordan-river/398/" },
      { name: "Mount of Olives", url: "https://www.itraveljerusalem.com/ent/mount-of-olives/" },
      { name: "Garden of Gethsemane", url: "https://www.itraveljerusalem.com/ent/garden-of-gethsemane/" }
    ];

    // Children's Bible videos
    let kidsVideos = [
      {
        title: "David and Goliath",
        url: "https://www.youtube.com/embed/dQw4w9WgXcQ",
        description: "The classic story of David and Goliath for children"
      },
      {
        title: "Noah's Ark",
        url: "https://www.youtube.com/embed/dQw4w9WgXcQ",
        description: "The story of Noah and the great flood"
      },
      {
        title: "Jonah and the Whale",
        url: "https://www.youtube.com/embed/dQw4w9WgXcQ",
        description: "The story of Jonah and the big fish"
      },
      {
        title: "The Birth of Jesus",
        url: "https://www.youtube.com/embed/dQw4w9WgXcQ",
        description: "The Christmas story for children"
      }
    ];

    // Online study links
    const onlineStudyLinks = {
      googleMeet: "https://meet.google.com/new",
      whatsappGroup: "https://wa.me/254712345678",
      facebookLive: "https://facebook.com/revgeorgeomondi/live",
      telegramGroup: "https://t.me/joinchat/YourTelegramGroupLink"
    };

    // State variables
    let isLogin = true;
    let userData = null;
    let notes = [];
    let currentDate = new Date();
    let whiteboard = {
      canvas: null,
      ctx: null,
      isDrawing: false,
      lastX: 0,
      lastY: 0,
      currentTool: 'pen',
      currentColor: '#000000'
    };
    
    // Recording variables
    let mediaRecorder;
    let audioChunks = [];
    let isRecording = false;
    
    // Registered users (simulated database)
    let registeredUsers = JSON.parse(localStorage.getItem('registeredUsers')) || [];
    
    // Event Listeners
    photoInput.addEventListener('change', handlePhotoUpload);
    toggleAuth.addEventListener('click', toggleAuthMode);
    forgotPassword.addEventListener('click', handleForgotPassword);
    authForm.addEventListener('submit', handleAuthSubmit);
    logoutBtn.addEventListener('click', handleLogout);
    darkModeToggle.addEventListener('click', toggleDarkMode);
    document.getElementById('password').addEventListener('input', updatePasswordStrength);
    document.getElementById('email').addEventListener('blur', validateEmail);
    document.getElementById('password').addEventListener('blur', validatePassword);
    document.getElementById('confirmPassword').addEventListener('blur', validateConfirmPassword);
    
    // Initialize the application
    document.addEventListener('DOMContentLoaded', function() {
      // Load saved notes from localStorage
      loadNotes();
      
      // Check for saved dark mode preference
      if (localStorage.getItem('darkMode') === 'enabled') {
        document.body.classList.add('dark-mode');
        darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
      }

      // Setup sermon upload form
      document.getElementById('sermonUploadForm').addEventListener('submit', handleSermonUpload);
      
      // Setup prayer form
      document.getElementById('prayerForm').addEventListener('submit', handlePrayerSubmit);
      
      // Setup note form
      document.getElementById('noteForm').addEventListener('submit', handleNoteSubmit);
      
      // Setup donation form
      document.getElementById('donationForm').addEventListener('submit', handleDonationSubmit);
      
      // Setup M-Pesa form
      document.getElementById('mpesaForm').addEventListener('submit', handleMpesaFormSubmit);
      
      // Setup bank form
      document.getElementById('bankForm').addEventListener('submit', handleBankFormSubmit);
      
      // Setup video form
      document.getElementById('videoForm').addEventListener('submit', handleVideoFormSubmit);
      
      // Load any saved donation details
      loadDonationDetails();
    });
    
    // Functions
    function handlePhotoUpload() {
      const file = photoInput.files[0];
      if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = (e) => {
          photoPreview.src = e.target.result;
          photoPreview.style.display = 'block';
        };
        reader.readAsDataURL(file);
      } else {
        photoPreview.src = '#';
        photoPreview.style.display = 'none';
      }
    }
    
    function toggleAuthMode(e) {
      e.preventDefault();
      isLogin = !isLogin;
      
      if (isLogin) {
        authTitle.textContent = 'Login to Your Account';
        submitBtnText.textContent = 'Login';
        submitBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Login';
        toggleAuth.textContent = 'Create an account';
        nameGroup.style.display = 'none';
        confirmPasswordGroup.style.display = 'none';
        photoGroup.style.display = 'none';
      } else {
        authTitle.textContent = 'Create New Account';
        submitBtnText.textContent = 'Register';
        submitBtn.innerHTML = '<i class="fas fa-user-plus"></i> Register';
        toggleAuth.textContent = 'Already have an account?';
        nameGroup.style.display = 'block';
        confirmPasswordGroup.style.display = 'block';
        photoGroup.style.display = 'block';
      }
    }
    
    function validateEmail() {
      const email = document.getElementById('email').value.trim();
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      
      if (!email) {
        emailError.textContent = 'Email is required';
        emailError.style.display = 'block';
        return false;
      }
      
      if (!emailRegex.test(email)) {
        emailError.textContent = 'Please enter a valid email address';
        emailError.style.display = 'block';
        return false;
      }
      
      emailError.style.display = 'none';
      return true;
    }
    
    function validatePassword() {
      const password = document.getElementById('password').value;
      
      if (!password) {
        passwordError.textContent = 'Password is required';
        passwordError.style.display = 'block';
        return false;
      }
      
      if (password.length < 8) {
        passwordError.textContent = 'Password must be at least 8 characters';
        passwordError.style.display = 'block';
        return false;
      }
      
      passwordError.style.display = 'none';
      return true;
    }
    
    function validateConfirmPassword() {
      if (isLogin) return true;
      
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      
      if (!confirmPassword) {
        confirmPasswordError.textContent = 'Please confirm your password';
        confirmPasswordError.style.display = 'block';
        return false;
      }
      
      if (password !== confirmPassword) {
        confirmPasswordError.textContent = 'Passwords do not match';
        confirmPasswordError.style.display = 'block';
        return false;
      }
      
      confirmPasswordError.style.display = 'none';
      return true;
    }
    
    function handleForgotPassword(e) {
      e.preventDefault();
      const email = document.getElementById('email').value.trim();
      if (!email) {
        alert('Please enter your email address to receive a password reset link.');
        return;
      }
      
      // Check if email exists in registered users
      const userExists = registeredUsers.some(user => user.email === email);
      if (!userExists) {
        alert('No account found with that email address.');
        return;
      }
      
      showLoading();
      setTimeout(() => {
        hideLoading();
        alert(`Password reset link has been sent to ${email}. Please check your inbox.`);
      }, 1500);
    }
    
    function updatePasswordStrength() {
      const password = document.getElementById('password').value;
      let strength = 0;
      
      // Length check
      if (password.length > 7) strength += 25;
      if (password.length > 11) strength += 25;
      
      // Character type checks
      if (/[A-Z]/.test(password)) strength += 15;
      if (/[0-9]/.test(password)) strength += 15;
      if (/[^A-Za-z0-9]/.test(password)) strength += 20;
      
      // Update the strength bar
      passwordStrength.style.width = `${strength}%`;
      
      // Update color based on strength
      if (strength < 40) {
        passwordStrength.style.background = '#ff4757';
      } else if (strength < 70) {
        passwordStrength.style.background = '#ffa502';
      } else {
        passwordStrength.style.background = '#2ed573';
      }
    }
    
    function showLoading() {
      submitBtn.disabled = true;
      submitBtnText.textContent = 'Processing...';
      submitBtn.innerHTML = '<div class="spinner"></div> Processing...';
    }
    
    function hideLoading() {
      submitBtn.disabled = false;
      if (isLogin) {
        submitBtnText.textContent = 'Login';
        submitBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Login';
      } else {
        submitBtnText.textContent = 'Register';
        submitBtn.innerHTML = '<i class="fas fa-user-plus"></i> Register';
      }
    }
    
    async function handleAuthSubmit(e) {
      e.preventDefault();
      
      // Validate form
      const emailValid = validateEmail();
      const passwordValid = validatePassword();
      let confirmPasswordValid = true;
      
      if (!isLogin) {
        confirmPasswordValid = validateConfirmPassword();
      }
      
      if (!emailValid || !passwordValid || !confirmPasswordValid) {
        return;
      }
      
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value.trim();
      
      if (isLogin) {
        // Login logic
        showLoading();
        
        // Simulate API call delay
        await new Promise(resolve => setTimeout(resolve, 1500));
        
        // Check if user exists and password matches
        const user = registeredUsers.find(user => user.email === email && user.password === password);
        
        if (!user) {
          hideLoading();
          alert('Invalid email or password. Please try again.');
          return;
        }
        
        // Simulate successful login
        userData = {
          name: user.name,
          email: user.email,
          photo: user.photo || 'https://via.placeholder.com/150'
        };
        
        hideLoading();
        showApp(userData);
        
      } else {
        // Registration logic
        const name = document.getElementById('name').value.trim();
        const confirmPassword = document.getElementById('confirmPassword').value.trim();
        
        showLoading();
        
        // Check if email already exists
        const emailExists = registeredUsers.some(user => user.email === email);
        if (emailExists) {
          hideLoading();
          alert('An account with this email already exists. Please login instead.');
          return;
        }
        
        // Simulate API call delay
        await new Promise(resolve => setTimeout(resolve, 1500));
        
        // Save new user to "database"
        const newUser = {
          name: name,
          email: email,
          password: password,
          photo: photoPreview.src || 'https://via.placeholder.com/150'
        };
        
        registeredUsers.push(newUser);
        localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
        
        // Simulate successful registration
        userData = newUser;
        
        hideLoading();
        showApp(userData);
      }
    }
    
    function showApp(user) {
      // Update UI with user data
      welcomeMessage.textContent = `Welcome, ${user.name}!`;
      userPhoto.src = user.photo;
      userPhoto.style.display = 'block';
      
      // Hide auth container and show app
      authContainer.style.display = 'none';
      document.body.classList.remove('auth-page');
      appContainer.style.display = 'block';
      
      // Add fade-in animation
      appContainer.classList.add('fade-in');
      
      // Set up navigation
      setupNavigation();
      
      // Set up whiteboard if not already
      if (!whiteboard.canvas) {
        setupWhiteboard();
      }
      
      // Render calendar
      renderCalendar();
      
      // Render notes
      renderNotes();
      
      // Render kids videos
      renderKidsVideos();
    }
    
    function handleLogout() {
      // Reset form
      authForm.reset();
      photoPreview.src = '#';
      photoPreview.style.display = 'none';
      passwordStrength.style.width = '0';
      
      // Show auth container and hide app
      authContainer.style.display = 'block';
      document.body.classList.add('auth-page');
      appContainer.style.display = 'none';
      userPhoto.style.display = 'none';
      
      // Reset to login mode
      isLogin = true;
      authTitle.textContent = 'Login to Your Account';
      submitBtnText.textContent = 'Login';
      submitBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Login';
      toggleAuth.textContent = 'Create an account';
      nameGroup.style.display = 'none';
      confirmPasswordGroup.style.display = 'none';
      photoGroup.style.display = 'none';
    }
    
    function setupNavigation() {
      const navLinks = document.querySelectorAll('.sidebar-menu a');
      
      navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          
          // Remove active class from all links
          navLinks.forEach(l => l.classList.remove('active'));
          
          // Add active class to clicked link
          this.classList.add('active');
          
          // Show the corresponding section
          const section = this.getAttribute('data-section');
          showSection(section);
        });
      });
    }
    
    function showSection(section) {
      // Hide all sections
      document.querySelectorAll('main section').forEach(sec => {
        sec.style.display = 'none';
      });
      
      // Show the requested section
      document.getElementById(`${section}-section`).style.display = 'block';
      
      // Special setup for certain sections
      if (section === 'whiteboard') {
        resizeWhiteboard();
      } else if (section === 'calendar') {
        renderCalendar();
      } else if (section === 'children') {
        renderKidsVideos();
      }
    }
    
    // Load notes from localStorage
    function loadNotes() {
      const savedNotes = localStorage.getItem('notes');
      if (savedNotes) {
        notes = JSON.parse(savedNotes);
        renderNotes();
      }
    }

    // Save notes to localStorage
    function saveNotes() {
      localStorage.setItem('notes', JSON.stringify(notes));
    }

    // Render notes in the notes section
    function renderNotes() {
      const notesContainer = document.getElementById('notesContainer');
      notesContainer.innerHTML = '';
      
      if (notes.length === 0) {
        notesContainer.innerHTML = '<p>No notes yet. Click "Add New Note" to create your first note.</p>';
        return;
      }
      
      notes.forEach((note, index) => {
        const noteCard = document.createElement('div');
        noteCard.className = 'note-card';
        noteCard.innerHTML = `
          <h3 class="note-title">${note.title}</h3>
          <p class="note-content">${note.content}</p>
          <p class="note-date">${note.date}</p>
          <div class="note-actions">
            <button class="btn btn-primary" onclick="editNote(${index})">Edit</button>
            <button class="btn btn-secondary" onclick="deleteNote(${index})">Delete</button>
          </div>
        `;
        notesContainer.appendChild(noteCard);
      });
    }

    // Open note modal for adding or editing
    function openNoteModal(editIndex = null) {
      const noteModal = document.getElementById('noteModal');
      noteModal.style.display = 'flex';
      if (editIndex !== null) {
        const note = notes[editIndex];
        document.getElementById('noteId').value = editIndex;
        document.getElementById('noteTitle').value = note.title;
        document.getElementById('noteContent').value = note.content;
        document.getElementById('noteModalTitle').textContent = 'Edit Note';
      } else {
        document.getElementById('noteId').value = '';
        document.getElementById('noteTitle').value = '';
        document.getElementById('noteContent').value = '';
        document.getElementById('noteModalTitle').textContent = 'Add New Note';
      }
    }

    // Close note modal
    function closeNoteModal() {
      const noteModal = document.getElementById('noteModal');
      noteModal.style.display = 'none';
    }

    // Handle note submission
    function handleNoteSubmit(e) {
      e.preventDefault();
      const noteId = document.getElementById('noteId').value;
      const noteTitle = document.getElementById('noteTitle').value;
      const noteContent = document.getElementById('noteContent').value;
      const noteDate = new Date().toLocaleString();
      
      if (noteId) {
        notes[noteId] = { title: noteTitle, content: noteContent, date: noteDate };
      } else {
        notes.push({ title: noteTitle, content: noteContent, date: noteDate });
      }
      
      saveNotes();
      renderNotes();
      closeNoteModal();
    }

    // Delete a note
    function deleteNote(index) {
      if (confirm('Are you sure you want to delete this note?')) {
        notes.splice(index, 1);
        saveNotes();
        renderNotes();
      }
    }

    // Edit a note
    function editNote(index) {
      openNoteModal(index);
    }
    
    // Prayer functions
    function openPrayerModal() {
      const prayerModal = document.getElementById('prayerModal');
      prayerModal.style.display = 'flex';
    }
    
    function closePrayerModal() {
      const prayerModal = document.getElementById('prayerModal');
      prayerModal.style.display = 'none';
    }
    
    function handlePrayerSubmit(e) {
      e.preventDefault();
      const title = document.getElementById('prayerTitle').value;
      const content = document.getElementById('prayerContent').value;
      const isAnonymous = document.getElementById('anonymousPrayer').checked;
      
      // In a real app, you would send this to a server
      const prayerRequest = {
        title,
        content,
        author: isAnonymous ? 'Anonymous' : userData.name,
        date: new Date().toLocaleDateString()
      };
      
      // Add to the prayer container (simulated)
      const prayerContainer = document.getElementById('prayerContainer');
      const prayerElement = document.createElement('div');
      prayerElement.className = 'note-card';
      prayerElement.innerHTML = `
        <h3 class="note-title">${prayerRequest.title}</h3>
        <p class="note-content">${prayerRequest.content}</p>
        <p class="note-date">Submitted: ${prayerRequest.date} by ${prayerRequest.author}</p>
        <div class="note-actions">
          <button class="btn btn-primary">I Prayed</button>
          <button class="btn btn-secondary">Share</button>
        </div>
      `;
      
      // Add to the beginning of the container
      prayerContainer.insertBefore(prayerElement, prayerContainer.firstChild);
      
      // Reset form and close modal
      e.target.reset();
      closePrayerModal();
      
      alert('Your prayer request has been submitted. Thank you for sharing!');
    }

    // Sermon functions
    function openSermonUploadModal() {
      document.getElementById('sermonUploadModal').style.display = 'flex';
    }

    function closeSermonUploadModal() {
      document.getElementById('sermonUploadModal').style.display = 'none';
    }

    function createSermonSeries() {
      const seriesName = prompt("Enter name for new sermon series:");
      if (seriesName) {
        alert(`Sermon series "${seriesName}" would be created in a real implementation.`);
      }
    }

    function searchSermons() {
      const query = document.getElementById('sermonSearch').value.trim();
      if (query) {
        alert(`Searching for sermons containing: ${query}\nIn a real implementation, this would filter the sermon list.`);
      }
    }

    function handleSermonUpload(e) {
      e.preventDefault();
      
      // Get form values
      const title = document.getElementById('sermonTitle').value;
      const speaker = document.getElementById('sermonSpeaker').value;
      const date = document.getElementById('sermonDate').value;
      const series = document.getElementById('sermonSeries').value;
      const description = document.getElementById('sermonDescription').value;
      const file = document.getElementById('sermonFile').files[0];
      const thumbnail = document.getElementById('sermonThumbnail').files[0];
      
      // Validate file
      if (!file) {
        alert('Please select a sermon file to upload');
        return;
      }
      
      // Check file type
      const validTypes = ['audio/mp3', 'video/mp4', 'application/pdf'];
      if (!validTypes.includes(file.type)) {
        alert('Please upload a valid file type (MP3, MP4, or PDF)');
        return;
      }
      
      // In a real implementation, you would upload the files to a server here
      alert(`Sermon "${title}" by ${speaker} would be uploaded in a real implementation.\n\nFile: ${file.name}\nThumbnail: ${thumbnail ? thumbnail.name : 'None'}`);
      
      // Close modal and reset form
      closeSermonUploadModal();
      e.target.reset();
    }

    function playSermon(id) {
      alert(`Playing sermon with ID ${id}\nIn a real implementation, this would open a media player.`);
    }

    function downloadSermon(id) {
      alert(`Downloading sermon with ID ${id}\nIn a real implementation, this would initiate a file download.`);
    }
    
    // Recording functions
    function openRecordingModal() {
      document.getElementById('recordingModal').style.display = 'flex';
    }
    
    function closeRecordingModal() {
      document.getElementById('recordingModal').style.display = 'none';
      if (isRecording) {
        stopRecording();
      }
    }
    
    async function toggleRecording() {
      if (isRecording) {
        stopRecording();
        return;
      }
      
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        mediaRecorder = new MediaRecorder(stream);
        audioChunks = [];
        
        mediaRecorder.ondataavailable = event => {
          audioChunks.push(event.data);
        };
        
        mediaRecorder.onstop = () => {
          const audioBlob = new Blob(audioChunks, { type: 'audio/mp3' });
          const audioUrl = URL.createObjectURL(audioBlob);
          const audioPreview = document.getElementById('recordingPreview');
          audioPreview.src = audioUrl;
          audioPreview.style.display = 'block';
          
          document.getElementById('saveButton').disabled = false;
        };
        
        mediaRecorder.start();
        isRecording = true;
        document.getElementById('recordButton').innerHTML = '<i class="fas fa-microphone"></i> Recording...';
        document.getElementById('recordButton').classList.add('btn-accent');
        document.getElementById('stopButton').disabled = false;
        
        // Start visualization (simplified)
        visualizeAudio(stream);
        
      } catch (error) {
        console.error('Error accessing microphone:', error);
        alert('Could not access microphone. Please ensure you have granted permission.');
      }
    }
    
    function stopRecording() {
      if (mediaRecorder && isRecording) {
        mediaRecorder.stop();
        isRecording = false;
        document.getElementById('recordButton').innerHTML = '<i class="fas fa-microphone"></i> Start Recording';
        document.getElementById('recordButton').classList.remove('btn-accent');
        document.getElementById('stopButton').disabled = true;
        
        // Stop all tracks
        mediaRecorder.stream.getTracks().forEach(track => track.stop());
      }
    }
    
    function saveRecording() {
      const audioPreview = document.getElementById('recordingPreview');
      if (!audioPreview.src) {
        alert('No recording to save');
        return;
      }
      
      // In a real implementation, you would upload the recording to a server
      alert('Recording would be saved to the server in a real implementation.');
      
      // Reset recording UI
      audioPreview.src = '';
      audioPreview.style.display = 'none';
      document.getElementById('saveButton').disabled = true;
      document.getElementById('audioVisualizer').innerHTML = '';
    }
    
    function visualizeAudio(stream) {
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const analyser = audioContext.createAnalyser();
      const microphone = audioContext.createMediaStreamSource(stream);
      const javascriptNode = audioContext.createScriptProcessor(2048, 1, 1);
      
      analyser.smoothingTimeConstant = 0.8;
      analyser.fftSize = 1024;
      
      microphone.connect(analyser);
      analyser.connect(javascriptNode);
      javascriptNode.connect(audioContext.destination);
      
      const canvas = document.createElement('canvas');
      canvas.width = document.getElementById('audioVisualizer').clientWidth;
      canvas.height = document.getElementById('audioVisualizer').clientHeight;
      document.getElementById('audioVisualizer').appendChild(canvas);
      
      const canvasContext = canvas.getContext('2d');
      const gradient = canvasContext.createLinearGradient(0, 0, 0, canvas.height);
      gradient.addColorStop(1, '#4a6bff');
      gradient.addColorStop(0.5, '#6c5ce7');
      gradient.addColorStop(0, '#ff4757');
      
      javascriptNode.onaudioprocess = function() {
        if (!isRecording) return;
        
        const array = new Uint8Array(analyser.frequencyBinCount);
        analyser.getByteFrequencyData(array);
        
        canvasContext.clearRect(0, 0, canvas.width, canvas.height);
        canvasContext.fillStyle = gradient;
        
        for (let i = 0; i < array.length; i++) {
          const value = array[i];
          const percent = value / 255;
          const height = canvas.height * percent;
          const offset = canvas.height - height - 1;
          const barWidth = canvas.width / array.length;
          
          canvasContext.fillRect(i * barWidth, offset, barWidth, height);
        }
      };
    }
    
    // Donation functions
    function loadDonationDetails() {
      // Load saved donation details from localStorage
      const savedMpesa = JSON.parse(localStorage.getItem('mpesaDetails'));
      const savedBank = JSON.parse(localStorage.getItem('bankDetails'));
      
      if (savedMpesa) {
        document.getElementById('mpesaPaybill').textContent = savedMpesa.paybill;
        document.getElementById('mpesaAccount').textContent = savedMpesa.account;
      }
      
      if (savedBank) {
        document.getElementById('bankName').textContent = savedBank.bankName;
        document.getElementById('bankAccountName').textContent = savedBank.accountName;
        document.getElementById('bankAccountNumber').textContent = savedBank.accountNumber;
        document.getElementById('bankBranch').textContent = savedBank.branch;
      }
    }
    
    function openCardDonationModal() {
      document.getElementById('donationModal').style.display = 'flex';
    }
    
    function closeDonationModal() {
      document.getElementById('donationModal').style.display = 'none';
    }
    
    function openEditMpesaModal() {
      const modal = document.getElementById('editMpesaModal');
      const paybill = document.getElementById('mpesaPaybill').textContent;
      const account = document.getElementById('mpesaAccount').textContent;
      
      document.getElementById('editPaybill').value = paybill;
      document.getElementById('editAccount').value = account;
      modal.style.display = 'flex';
    }
    
    function closeEditMpesaModal() {
      document.getElementById('editMpesaModal').style.display = 'none';
    }
    
    function openEditBankModal() {
      const modal = document.getElementById('editBankModal');
      
      document.getElementById('editBankName').value = document.getElementById('bankName').textContent;
      document.getElementById('editAccountName').value = document.getElementById('bankAccountName').textContent;
      document.getElementById('editAccountNumber').value = document.getElementById('bankAccountNumber').textContent;
      document.getElementById('editBankBranch').value = document.getElementById('bankBranch').textContent;
      
      modal.style.display = 'flex';
    }
    
    function closeEditBankModal() {
      document.getElementById('editBankModal').style.display = 'none';
    }
    
    function handleMpesaFormSubmit(e) {
      e.preventDefault();
      const paybill = document.getElementById('editPaybill').value;
      const account = document.getElementById('editAccount').value;
      
      // Update the UI
      document.getElementById('mpesaPaybill').textContent = paybill;
      document.getElementById('mpesaAccount').textContent = account;
      
      // Save to localStorage
      localStorage.setItem('mpesaDetails', JSON.stringify({
        paybill: paybill,
        account: account
      }));
      
      closeEditMpesaModal();
      alert('M-Pesa details updated successfully!');
    }
    
    function handleBankFormSubmit(e) {
      e.preventDefault();
      const bankName = document.getElementById('editBankName').value;
      const accountName = document.getElementById('editAccountName').value;
      const accountNumber = document.getElementById('editAccountNumber').value;
      const branch = document.getElementById('editBankBranch').value;
      
      // Update the UI
      document.getElementById('bankName').textContent = bankName;
      document.getElementById('bankAccountName').textContent = accountName;
      document.getElementById('bankAccountNumber').textContent = accountNumber;
      document.getElementById('bankBranch').textContent = branch;
      
      // Save to localStorage
      localStorage.setItem('bankDetails', JSON.stringify({
        bankName: bankName,
        accountName: accountName,
        accountNumber: accountNumber,
        branch: branch
      }));
      
      closeEditBankModal();
      alert('Bank details updated successfully!');
    }
    
    function copyMpesaDetails() {
      const paybill = document.getElementById('mpesaPaybill').textContent;
      const account = document.getElementById('mpesaAccount').textContent;
      const text = `Paybill: ${paybill}\nAccount: ${account}`;
      
      navigator.clipboard.writeText(text).then(() => {
        alert('M-Pesa details copied to clipboard!');
      }).catch(err => {
        console.error('Failed to copy: ', err);
        alert('Could not copy details automatically. Please note:\nPaybill: ' + paybill + '\nAccount: ' + account);
      });
    }
    
    function copyBankDetails() {
      const bankName = document.getElementById('bankName').textContent;
      const accountName = document.getElementById('bankAccountName').textContent;
      const accountNumber = document.getElementById('bankAccountNumber').textContent;
      const branch = document.getElementById('bankBranch').textContent;
      
      const text = `Bank Name: ${bankName}\nAccount Name: ${accountName}\nAccount Number: ${accountNumber}\nBranch: ${branch}`;
      
      navigator.clipboard.writeText(text).then(() => {
        alert('Bank details copied to clipboard!');
      }).catch(err => {
        console.error('Failed to copy: ', err);
        alert('Could not copy details automatically. Please note:\nBank Name: ${bankName}\nAccount Name: ${accountName}\nAccount Number: ${accountNumber}\nBranch: ${branch}');
      });
    }
    
    function handleDonationSubmit(e) {
      e.preventDefault();
      
      const amount = document.getElementById('donationAmount').value;
      const name = document.getElementById('donationName').value || 'Anonymous';
      const phone = document.getElementById('donationPhone').value;
      const message = document.getElementById('donationMessage').value;
      
      if (!amount || amount < 10) {
        alert('Please enter a valid donation amount (minimum KSh 10)');
        return;
      }
      
      if (!phone || !phone.match(/^254[0-9]{9}$/)) {
        alert('Please enter a valid Kenyan phone number starting with 254 (e.g. 254712345678)');
        return;
      }
      
      // In a real implementation, this would process the payment
      alert(`Thank you ${name} for your donation of KSh ${amount}!\n\nA payment request would be sent to ${phone} in a real implementation.`);
      
      // Reset form and close modal
      e.target.reset();
      closeDonationModal();
    }
    
    // Children's Bible Study functions
    function renderKidsVideos() {
      const kidsSection = document.querySelector('#children-section .kids-videos');
      if (!kidsSection) return;
      
      kidsSection.innerHTML = '';
      
      kidsVideos.forEach(video => {
        const videoCard = document.createElement('div');
        videoCard.className = 'video-card';
        videoCard.innerHTML = `
          <div class="video-container">
            <iframe src="${video.url}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          </div>
          <div class="video-info">
            <h4 class="video-title">${video.title}</h4>
            <p class="video-desc">${video.description}</p>
          </div>
        `;
        kidsSection.appendChild(videoCard);
      });
    }
    
    function openAddVideoModal() {
      document.getElementById('addVideoModal').style.display = 'flex';
    }
    
    function closeAddVideoModal() {
      document.getElementById('addVideoModal').style.display = 'none';
    }
    
    function handleVideoFormSubmit(e) {
      e.preventDefault();
      const title = document.getElementById('videoTitle').value;
      const url = document.getElementById('videoUrl').value;
      const description = document.getElementById('videoDescription').value;
      
      // Validate YouTube URL
      if (!url.includes('youtube.com/embed/')) {
        alert('Please use a valid YouTube embed URL (should contain "youtube.com/embed/")');
        return;
      }
      
      // Add new video
      kidsVideos.push({
        title: title,
        url: url,
        description: description
      });
      
      // Re-render videos
      renderKidsVideos();
      
      // Close modal and reset form
      closeAddVideoModal();
      e.target.reset();
    }
    
    function joinGoogleMeet() {
      window.open(onlineStudyLinks.googleMeet, '_blank');
    }
    
    function joinWhatsAppGroup() {
      window.open(onlineStudyLinks.whatsappGroup, '_blank');
    }
    
    function joinFacebookLive() {
      window.open(onlineStudyLinks.facebookLive, '_blank');
    }
    
    function showKidsSchedule() {
      alert('Upcoming Children\'s Bible Study Sessions:\n\n' +
            'Every Sunday: 10:00 AM - 11:00 AM\n' +
            'Every Wednesday: 4:00 PM - 5:00 PM\n' +
            'Special Holiday Sessions: Check announcements');
    }
    
    // Teaching tools functions
    function openVirtualClassroom() {
      const options = document.getElementById('virtualClassOptions');
      options.style.display = options.style.display === 'none' ? 'flex' : 'none';
    }

    function connectToMicrosoftWord() {
      // Open Microsoft Word Online in a new tab
      window.open('https://www.office.com/launch/word', '_blank');
    }

    function openScreenShare() {
      const options = document.getElementById('screenShareOptions');
      options.style.display = options.style.display === 'none' ? 'flex' : 'none';
    }

    function startWhatsAppMeeting() {
      // In a real implementation, this would use WhatsApp API
      const meetingLink = "https://wa.me/" + prompt("Enter WhatsApp number with country code (e.g. 254712345678):");
      if (meetingLink) {
        window.open(meetingLink, '_blank');
      }
    }

    function startGoogleMeet() {
      // Open Google Meet in a new tab
      window.open("https://meet.google.com/new", '_blank');
    }

    function shareViaWhatsApp() {
      // In a real implementation, this would use WhatsApp API
      const shareLink = "https://wa.me/" + prompt("Enter WhatsApp number with country code to share screen:");
      if (shareLink) {
        window.open(shareLink, '_blank');
      }
    }

    function shareViaGoogleMeet() {
      // In a real implementation, this would use Google Meet API
      alert("Please start a Google Meet first, then use the 'Present now' option in the meeting controls to share your screen.");
      window.open("https://meet.google.com/new", '_blank');
    }

    function openWhiteboardSection() {
      showSection('whiteboard');
    }
    
    function openResourceLibrary() {
      const options = document.getElementById('resourceLibraryOptions');
      options.style.display = options.style.display === 'none' ? 'flex' : 'none';
    }

    // Show Bible versions in a modal
    function showBibleVersions() {
      const modalContent = `
        <div class="modal-header">
          <h3 class="modal-title">Bible Versions</h3>
          <button class="close-modal" onclick="closeResourceModal()">&times;</button>
        </div>
        <div class="modal-body">
          <ul style="list-style: none; padding: 0;">
            ${bibleVersions.map(version => `
              <li style="margin-bottom: 10px;">
                <a href="${version.url}" target="_blank" rel="noopener noreferrer" style="color: var(--primary-color); text-decoration: none;">
                  <i class="fas fa-bible"></i> ${version.name}
                </a>
              </li>
            `).join('')}
          </ul>
        </div>
      `;
      openResourceModal(modalContent);
    }

    // Show Biblical sites in a modal
    function showBiblicalSites() {
      const modalContent = `
        <div class="modal-header">
          <h3 class="modal-title">Biblical Sites</h3>
          <button class="close-modal" onclick="closeResourceModal()">&times;</button>
        </div>
        <div class="modal-body">
          <ul style="list-style: none; padding: 0;">
            ${biblicalSites.map(site => `
              <li style="margin-bottom: 10px;">
                <a href="${site.url}" target="_blank" rel="noopener noreferrer" style="color: var(--primary-color); text-decoration: none;">
                  <i class="fas fa-map-marker-alt"></i> ${site.name}
                </a>
              </li>
            `).join('')}
          </ul>
        </div>
      `;
      openResourceModal(modalContent);
    }

    // Open resource modal with custom content
    function openResourceModal(content) {
      const modal = document.getElementById('resourceModal');
      const modalBody = document.getElementById('resourceModalBody');
      modalBody.innerHTML = content;
      modal.style.display = 'flex';
    }

    // Close resource modal
    function closeResourceModal() {
      document.getElementById('resourceModal').style.display = 'none';
    }
    
    // Whiteboard functions
    function setupWhiteboard() {
      whiteboard.canvas = document.getElementById('whiteboardCanvas');
      whiteboard.ctx = whiteboard.canvas.getContext('2d');
      
      // Set up event listeners
      whiteboard.canvas.addEventListener('mousedown', startDrawing);
      whiteboard.canvas.addEventListener('mousemove', draw);
      whiteboard.canvas.addEventListener('mouseup', stopDrawing);
      whiteboard.canvas.addEventListener('mouseout', stopDrawing);
      
      // Set up touch events for mobile
      whiteboard.canvas.addEventListener('touchstart', handleTouchStart);
      whiteboard.canvas.addEventListener('touchmove', handleTouchMove);
      whiteboard.canvas.addEventListener('touchend', handleTouchEnd);
      
      // Set up tool selection
      document.querySelectorAll('.whiteboard-tool').forEach(tool => {
        tool.addEventListener('click', function() {
          document.querySelectorAll('.whiteboard-tool').forEach(t => t.classList.remove('active'));
          this.classList.add('active');
          whiteboard.currentTool = this.getAttribute('data-tool');
          
          if (whiteboard.currentTool === 'clear') {
            clearWhiteboard();
          }
        });
      });
      
      // Set up color picker
      document.getElementById('colorPicker').addEventListener('input', function() {
        whiteboard.currentColor = this.value;
      });
      
      resizeWhiteboard();
    }
    
    function resizeWhiteboard() {
      const container = document.querySelector('.whiteboard-container');
      whiteboard.canvas.width = container.clientWidth - 40; // account for padding
      whiteboard.canvas.height = 500;
      clearWhiteboard();
    }
    
    function startDrawing(e) {
      if (whiteboard.currentTool === 'pen' || whiteboard.currentTool === 'eraser') {
        whiteboard.isDrawing = true;
        [whiteboard.lastX, whiteboard.lastY] = getPosition(e);
      }
    }
    
    function draw(e) {
      if (!whiteboard.isDrawing) return;
      
      const [x, y] = getPosition(e);
      
      whiteboard.ctx.beginPath();
      whiteboard.ctx.moveTo(whiteboard.lastX, whiteboard.lastY);
      whiteboard.ctx.lineTo(x, y);
      
      if (whiteboard.currentTool === 'eraser') {
        whiteboard.ctx.strokeStyle = 'white';
        whiteboard.ctx.lineWidth = 20;
      } else {
        whiteboard.ctx.strokeStyle = whiteboard.currentColor;
        whiteboard.ctx.lineWidth = 5;
      }
      
      whiteboard.ctx.lineCap = 'round';
      whiteboard.ctx.lineJoin = 'round';
      whiteboard.ctx.stroke();
      
      [whiteboard.lastX, whiteboard.lastY] = [x, y];
    }
    
    function stopDrawing() {
      whiteboard.isDrawing = false;
    }
    
    function clearWhiteboard() {
      whiteboard.ctx.fillStyle = 'white';
      whiteboard.ctx.fillRect(0, 0, whiteboard.canvas.width, whiteboard.canvas.height);
    }
    
    function getPosition(e) {
      const rect = whiteboard.canvas.getBoundingClientRect();
      return [
        e.clientX - rect.left,
        e.clientY - rect.top
      ];
    }
    
    // Touch event handlers for whiteboard
    function handleTouchStart(e) {
      e.preventDefault();
      const touch = e.touches[0];
      const mouseEvent = new MouseEvent('mousedown', {
        clientX: touch.clientX,
        clientY: touch.clientY
      });
      whiteboard.canvas.dispatchEvent(mouseEvent);
    }
    
    function handleTouchMove(e) {
      e.preventDefault();
      const touch = e.touches[0];
      const mouseEvent = new MouseEvent('mousemove', {
        clientX: touch.clientX,
        clientY: touch.clientY
      });
      whiteboard.canvas.dispatchEvent(mouseEvent);
    }
    
    function handleTouchEnd(e) {
      e.preventDefault();
      const mouseEvent = new MouseEvent('mouseup', {});
      whiteboard.canvas.dispatchEvent(mouseEvent);
    }
    
    // Calendar functions
    function renderCalendar() {
      const calendarGrid = document.getElementById('calendarGrid');
      calendarGrid.innerHTML = '';
      
      // Add day headers
      const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      days.forEach(day => {
        const dayHeader = document.createElement('div');
        dayHeader.className = 'calendar-day-header';
        dayHeader.textContent = day;
        calendarGrid.appendChild(dayHeader);
      });
      
      // Get first day of month and total days in month
      const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1).getDay();
      const daysInMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0).getDate();
      
      // Get days from previous month
      const prevMonthDays = new Date(currentDate.getFullYear(), currentDate.getMonth(), 0).getDate();
      
      // Add days from previous month
      for (let i = firstDay - 1; i >= 0; i--) {
        const dayElement = document.createElement('div');
        dayElement.className = 'calendar-day other-month';
        dayElement.textContent = prevMonthDays - i;
        calendarGrid.appendChild(dayElement);
      }
      
      // Add days from current month
      const today = new Date();
      for (let i = 1; i <= daysInMonth; i++) {
        const dayElement = document.createElement('div');
        dayElement.className = 'calendar-day';
        dayElement.textContent = i;
        
        // Highlight today
        if (i === today.getDate() && 
            currentDate.getMonth() === today.getMonth() && 
            currentDate.getFullYear() === today.getFullYear()) {
          dayElement.classList.add('today');
        }
        
        // Add click event
        dayElement.addEventListener('click', () => {
          alert(`You clicked on ${currentDate.toLocaleString('default', { month: 'long' })} ${i}, ${currentDate.getFullYear()}`);
        });
        
        calendarGrid.appendChild(dayElement);
      }
      
      // Add days from next month
      const totalCells = firstDay + daysInMonth;
      const remainingCells = totalCells <= 35 ? 35 - totalCells : 42 - totalCells;
      
      for (let i = 1; i <= remainingCells; i++) {
        const dayElement = document.createElement('div');
        dayElement.className = 'calendar-day other-month';
        dayElement.textContent = i;
        calendarGrid.appendChild(dayElement);
      }
      
      // Update month/year display
      document.getElementById('calendarMonthYear').textContent = 
        `${currentDate.toLocaleString('default', { month: 'long' })} ${currentDate.getFullYear()}`;
    }
    
    function prevMonth() {
      currentDate = new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1);
      renderCalendar();
    }
    
    function nextMonth() {
      currentDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1);
      renderCalendar();
    }
    
    // File manager functions
    function uploadFile() {
      // In a real implementation, this would use the File API
      const fileName = prompt('Enter file name:');
      if (fileName) {
        alert(`File ${fileName} would be uploaded in a real implementation.`);
      }
    }
    
    function createFolder() {
      const folderName = prompt('Enter folder name:');
      if (folderName) {
        alert(`Folder ${folderName} would be created in a real implementation.`);
      }
    }
    
    // Social login functions
    function loginWithGoogle() {
      alert('Google login would be implemented here. In a real app, you would use Google OAuth.');
    }
    
    function loginWithFacebook() {
      alert('Facebook login would be implemented here. In a real app, you would use Facebook OAuth.');
    }
    
    // Dark mode toggle
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      
      if (document.body.classList.contains('dark-mode')) {
        localStorage.setItem('darkMode', 'enabled');
        darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
      } else {
        localStorage.removeItem('darkMode');
        darkModeToggle.innerHTML = '<i class="fas fa-moon"></i>';
      }
    } 
    
    // Window resize handler
    window.addEventListener('resize', function() {
      if (whiteboard.canvas) {
        resizeWhiteboard();
      }
    });
  </script>
</body>
</html>